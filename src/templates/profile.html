{% extends 'base.html' %}
{% block main %}
<button type="button" class="button" onclick="simple_action('{{ url_for('catalog', sort_by=0) }}')">Back to Catalog</button><br><br>
<button type="button" class="button" onclick=simple_action("{{ url_for('login') }}")>Login</button>
<button type="button" class="button" onclick=simple_action("{{ url_for('signup') }}")>Sign Up</button>
<br><br>
{% if current_profile %}
<h1>{{ current_profile.id }}</h1>
<table>
    <tbody>
        <tr>
            <td>Rating</td>
            <td>{{ avg }}</td>
        </tr>
        <tr>
            <td>Name</td>
            <td>{{ current_profile.id }}</td>
        </tr>
    </tbody>
</table>
<h2> Reviews </h2>
<h3>Write a comment:</h3>
<form action="" method="POST" novalidate>
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    {{ form.hidden_tag() }}
    <p>{{ form.stars  }}</p>
    <p>{{ form.comment}}</p>
    <p>{{ form.submit }}</p>
</form>
{% for review in current_profile.reviews %}
    <h4>[{{ review.star_rating }}/5] {{ review.comment }} </h4>
    {% for reply in review.reply %}<p>----{{reply.comment}}</p>{% endfor %}
    ----<button type="button" class="button" onclick=simple_action("{{ url_for('profile_reply', current_profile=current_profile.id, comment_id=review.id) }}")>REPLY</button>
{% endfor %}
{% else %}
    <h1>User not found</h1>
{% endif %}
<script type="text/javascript">
    function simple_action(target) {
        window.location = target
    }
</script>
{% endblock %}